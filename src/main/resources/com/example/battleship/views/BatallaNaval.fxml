<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.canvas.Canvas?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<?import javafx.scene.control.Button?>
<StackPane fx:id="rootPane" prefHeight="750" prefWidth="1200" style="-fx-background-color: #2b2b2b;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.battleship.controllers.GameController">

    <!-- Contenedor Principal Horizontal -->
    <HBox alignment="CENTER" spacing="30" style="-fx-padding: 20;">

        <!-- === IZQUIERDA: PANEL DE BARCOS === -->
        <StackPane minWidth="250" style="-fx-border-color: white; -fx-border-width: 2; -fx-background-radius: 5; -fx-border-radius: 5;">
            <ImageView fitHeight="720" fitWidth="250" preserveRatio="false" style="-fx-opacity: 0.3;">
                <image>
                    <Image url="@images/welcome.png" />
                </image>
            </ImageView>

            <VBox alignment="TOP_CENTER" spacing="20" style="-fx-background-color: transparent; -fx-padding: 20;">
                <Label style="-fx-font-weight: bold; -fx-font-size: 16px; -fx-text-fill: white;" text="FLOTA DISPONIBLE" />
                <Label style="-fx-font-size: 12px; -fx-text-fill: white; -fx-wrap-text: true; -fx-text-alignment: center;" text="Arrastra los barcos a tu tablero para posicionarlos." />
                <Region prefHeight="10" />

                <!-- Barcos (Drag Sources) -->
                <VBox alignment="CENTER" spacing="5">
                    <Label style="-fx-font-weight: bold; -fx-text-fill: white;" text="Portaaviones (4)" />
                    <Canvas fx:id="carrierCanvas" height="40" width="160" />
                </VBox>
                <VBox alignment="CENTER" spacing="5">
                    <Label style="-fx-font-weight: bold; -fx-text-fill: white;" text="Submarinos (3)" />
                    <VBox spacing="10">
                        <Canvas fx:id="submarineCanvas1" height="40" width="120" />
                        <Canvas fx:id="submarineCanvas2" height="40" width="120" />
                    </VBox>
                </VBox>
                <VBox alignment="CENTER" spacing="5">
                    <Label style="-fx-font-weight: bold; -fx-text-fill: white;" text="Destructores (2)" />
                    <VBox spacing="10">
                        <Canvas fx:id="destroyerCanvas1" height="40" width="80" />
                        <Canvas fx:id="destroyerCanvas2" height="40" width="80" />
                        <Canvas fx:id="destroyerCanvas3" height="40" width="80" />
                    </VBox>
                </VBox>
                <VBox alignment="CENTER" spacing="5">
                    <Label style="-fx-font-weight: bold; -fx-text-fill: white;" text="Fragatas (1)" />
                    <HBox alignment="CENTER" spacing="15">
                        <Canvas fx:id="frigateCanvas1" height="40" width="40" />
                        <Canvas fx:id="frigateCanvas2" height="40" width="40" />
                    </HBox>
                    <HBox alignment="CENTER" spacing="15">
                        <Canvas fx:id="frigateCanvas3" height="40" width="40" />
                        <Canvas fx:id="frigateCanvas4" height="40" width="40" />
                    </HBox>
                </VBox>
                <Label style="-fx-font-size: 11px; -fx-text-fill: #ffd54f; -fx-font-style: italic;" text="(Tip: Antes de arrastrar,&#10; presiona 'R' para rotar)"/>
            </VBox>
        </StackPane>

        <!-- === DERECHA: TABLEROS Y TÍTULO === -->
        <VBox alignment="CENTER" spacing="20" HBox.hgrow="ALWAYS">

            <!-- CABECERA: TÍTULO, BOTÓN JUGAR Y CHECKBOX DEBUG -->
            <GridPane alignment="CENTER" hgap="20">
                <columnConstraints>
                    <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" percentWidth="33.0" />
                    <ColumnConstraints halignment="CENTER" hgrow="SOMETIMES" minWidth="10.0" percentWidth="34.0" />
                    <ColumnConstraints halignment="RIGHT" hgrow="SOMETIMES" minWidth="10.0" percentWidth="33.0" />
                </columnConstraints>
                <rowConstraints>
                    <RowConstraints vgrow="SOMETIMES" />
                </rowConstraints>

                <!-- Columna Centro: Título -->
                <Label style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.8), 10, 0, 0, 0);" text="BATALLA NAVAL" GridPane.columnIndex="1" />

                <!-- Columna Izquierda (o debajo del título): Botón JUGAR -->
                <Button fx:id="playButton" mnemonicParsing="false" onAction="#onPlayButton" styleClass="play-button" text="INICIAR JUEGO" GridPane.columnIndex="1" GridPane.valignment="BOTTOM" style="-fx-font-size: 16px; -fx-translate-y: 40;" />

                <!-- Columna Derecha: Checkbox -->
                <CheckBox fx:id="debugCheckBox" mnemonicParsing="false" onAction="#onDebugModeChanged" style="-fx-cursor: hand; -fx-font-size: 14px; -fx-background-color: rgba(0,0,0,0.5); -fx-padding: 5;" text="Ver Barcos Enemigos" textFill="WHITE" GridPane.columnIndex="2" />
            </GridPane>

            <!-- Separador extra por el botón -->
            <Region prefHeight="20" />

            <!-- TABLEROS JUGADOR VS ENEMIGO -->
            <HBox alignment="CENTER" spacing="50">

                <!-- - TABLERO DEL JUGADOR - -->
                <VBox alignment="CENTER" spacing="10">
                    <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #4fc3f7;" text="TU TERRITORIO" />
                    <GridPane alignment="CENTER">
                        <Region prefHeight="40" prefWidth="30" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <HBox alignment="CENTER" spacing="0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                            <!-- Letras A-J -->
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="A" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="B" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="C" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="D" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="E" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="F" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="G" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="H" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="I" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="J" />
                        </HBox>
                        <VBox alignment="CENTER" prefWidth="30" spacing="0" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <!-- Números 1-10 -->
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="1" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="2" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="3" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="4" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="5" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="6" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="7" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="8" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="9" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="10" />
                        </VBox>

                        <StackPane GridPane.columnIndex="1" GridPane.rowIndex="1">
                            <ImageView fitHeight="400" fitWidth="400" preserveRatio="false">
                                <image>
                                    <Image url="@images/mar.gif" />
                                </image>
                            </ImageView>
                            <GridPane fx:id="playerBoard" alignment="CENTER" gridLinesVisible="true" prefHeight="400" prefWidth="400" style="-fx-background-color: rgba(30, 81, 139, 0.5); -fx-border-color: #4fc3f7; -fx-border-width: 2;" />
                            <Pane fx:id="shipsPane" pickOnBounds="false" prefHeight="400" prefWidth="400" style="-fx-background-color: transparent;" />
                        </StackPane>
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>
                </VBox>

                <!-- - TABLERO ENEMIGO - -->
                <VBox alignment="CENTER" spacing="10">
                    <Label style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #e57373;" text="RADAR ENEMIGO" />
                    <GridPane alignment="CENTER">
                        <Region prefHeight="40" prefWidth="30" GridPane.columnIndex="0" GridPane.rowIndex="0" />
                        <HBox alignment="CENTER" spacing="0" GridPane.columnIndex="1" GridPane.rowIndex="0">
                            <!-- Letras A-J -->
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="A" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="B" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="C" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="D" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="E" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="F" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="G" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="H" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="I" />
                            <Label alignment="CENTER" prefWidth="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="J" />
                        </HBox>
                        <VBox alignment="CENTER" prefWidth="30" spacing="0" GridPane.columnIndex="0" GridPane.rowIndex="1">
                            <!-- Números 1-10 -->
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="1" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="2" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="3" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="4" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="5" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="6" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="7" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="8" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="9" />
                            <Label alignment="CENTER" minWidth="30" prefHeight="40" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: white;" text="10" />
                        </VBox>

                        <StackPane GridPane.columnIndex="1" GridPane.rowIndex="1">
                            <ImageView fitHeight="400" fitWidth="400" preserveRatio="false">
                                <image>
                                    <Image url="@images/mar.gif" />
                                </image>
                            </ImageView>
                            <GridPane fx:id="enemyBoard" alignment="CENTER" gridLinesVisible="true" prefHeight="400" prefWidth="400" style="-fx-background-color: rgba(107, 30, 30, 0.5); -fx-border-color: #e57373; -fx-border-width: 2;" />

                            <!-- NUEVO: Pane para los barcos enemigos -->
                            <Pane fx:id="enemyShipsPane" pickOnBounds="false" prefHeight="400" prefWidth="400" style="-fx-background-color: transparent;" />
                        </StackPane>
                        <columnConstraints>
                            <ColumnConstraints />
                            <ColumnConstraints />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                            <RowConstraints />
                        </rowConstraints>
                    </GridPane>
                </VBox>

            </HBox>

            <HBox alignment="CENTER" spacing="40" style="-fx-padding: 10; -fx-background-color: rgba(0,0,0,0.5); -fx-background-radius: 10;">
                <Label fx:id="playerScoreLabel" text="Mi Flota Perdida: 0/10"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #ff6b6b;" />

                <Label fx:id="turnLabel" text="Turno: Esperando..."
                       style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #ffeb3b; -fx-effect: dropshadow(three-pass-box, black, 10, 0, 0, 0);" />

                <Label fx:id="enemyScoreLabel" text="Enemigos Hundidos: 0/10"
                       style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #69f0ae;" />
            </HBox>
        </VBox>

    </HBox>

</StackPane>